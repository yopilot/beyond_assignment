{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/progress.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
{% endblock %}

{% block content %}
    <div class="container">
        <h1><img src="{{ url_for('static', filename='assets/icon.png') }}" alt="Reddit Persona Generator Icon" style="height: 2.5em; vertical-align: middle; margin-right: 0.5em;"> Reddit Persona Generator</h1>
        <h3 class="subtitle"
            style="font-weight: 700;
                   font-size: 1.3em;
                   color: #4b4b4b;
                   text-transform: uppercase;
                   letter-spacing: 0.5px;
                   margin: 1em 0;
                   text-shadow: 1px 1px 2px rgba(148, 146, 146, 0.1);
                   border-bottom: 2px solid;
                   display: inline-block;
                   padding-bottom: 2px;">
            Generate detailed user personas from Reddit activity
        </h3>
        
        <div class="input-group">
            <input type="text" id="username" placeholder="Enter Reddit username (without u/)" maxlength="50">
        </div>
        
        <button class="generate-btn" id="generateBtn" onclick="generatePersona()">
            Generate Persona
        </button>
        
        <div class="loading-spinner" id="loadingSpinner"></div>
        
        <div class="progress-container" id="progressContainer">
            <div class="progress-text" id="progressText">Initializing...</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="status-message" id="statusMessage"></div>

        </div>
        
        <div class="error-message" id="errorMessage"></div>
        <div class="success-message" id="successMessage"></div>
        
        <div class="result-container" id="resultContainer">
            <div class="result-title">✅ Persona Generated Successfully!</div>
            <p>Your persona has been generated and saved. Click below to download:</p>
            <div class="result-actions">
                <a href="#" id="downloadBtn" class="download-btn">📥 Download Persona</a>
                <button class="reset-btn" id="resetBtn" onclick="resetGeneration()">
                    🔄 Generate Another
                </button>
                <button class="delete-btn" id="deleteBtn" onclick="deleteReport()">
                    🗑️ Delete Report
                </button>
            </div>
            <!-- Sentiment Visualizations -->
            <div id="sentimentVisualizationsContainer" class="sentiment-visualizations">
                <h3 style="color: #4e73df; border-bottom: 2px solid #4e73df; padding-bottom: 10px; margin-bottom: 20px;">Enhanced Sentiment Analysis</h3>
                <div id="sentimentVisualizations"></div>
                <div id="visualizationStatus" style="color: #666; font-style: italic; margin-top: 10px;">Loading sentiment data...</div>
            </div>
            
            <!-- Persona Content Display -->
            <div id="personaContentContainer" class="persona-content-container">
                <h3>Generated Persona:</h3>
                <div id="personaContent" class="persona-content"></div>
            </div>
            
            
        </div>
        
        <div class="feature-list">
            <h3>What this tool analyzes:</h3>
            <ul>
                <li>Communication style and tone</li>
                <li>Main interests and topics</li>
                <li>Personality traits</li>
                <li>Online behavior patterns</li>
                <li>Subreddit preferences</li>
                <li>Engagement patterns</li>
            </ul>
        </div>
    </div>
{% endblock %}